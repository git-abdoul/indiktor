<f:subview id="updateUser" 
		xmlns:h="http://java.sun.com/jsf/html"
 	    xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ice="http://www.icesoft.com/icefaces/component">  
   
<ice:panelGrid id="USER1" columns="1" style="align: center; vertical-align: top;">
	<ice:panelGrid columns="2">
		<ice:outputLabel value="Login"/>
		<ice:inputText value="#{userBean.login}" disabled="#{userBean.user.id != 0}" style="#{userBean.loginStyle}"/>
		<ice:outputLabel value="" rendered="#{userBean.loginMandatory}"/>
		<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;" rendered="#{userBean.loginMandatory}"/>
		<ice:outputLabel value="" rendered="#{userBean.loginError}"/>
		<ice:outputLabel value="This login is already used !" style="color: red; font-size: 10px;" rendered="#{userBean.loginError}"/>
   			<ice:outputLabel value="" rendered="#{userBean.loginError}"/>
   			<ice:outputLabel  value="Please, choose another login." style="color: red; font-size: 10px;"
   							  rendered="#{userBean.loginError}"/>
		
		<ice:outputLabel value="Password:" visible="#{!userBean.enableResetLogin}"/>
		<ice:inputSecret redisplay="true" id="pwd" value="#{userBean.newPassword}"
						 disabled="#{userBean.user.id != 0}" style="#{userBean.newPasswordStyle}" visible="#{!userBean.enableResetLogin}"/>
		<ice:outputLabel value="" rendered="#{userBean.newPasswordMandatory}" visible="#{!userBean.enableResetLogin}"/>
		<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;"
						 rendered="#{userBean.newPasswordMandatory}" visible="#{!userBean.enableResetLogin}"/>
		
		<ice:outputLabel value="" rendered="#{userBean.pwdNotMatch}" visible="#{!userBean.enableResetLogin}"/>
		<ice:outputLabel value="Password doesn't Match. Please Retype new Password" style="color: red; font-size: 10px;"
						 rendered="#{userBean.pwdNotMatch}" disabled="#{userBean.user.id != 0}" visible="#{!userBean.enableResetLogin}"/>
		
		<ice:outputLabel value="Confirm Password:" rendered="#{userBean.user.id == 0}"/>
		<ice:inputSecret redisplay="true" id="verifyPwd" style="#{userBean.verifyPasswordStyle}" value="#{userBean.verifyPassword}"
						 rendered="#{userBean.user.id == 0}"/>
		<ice:outputLabel value="" rendered="#{userBean.verifyPasswordMandatory}" visible="#{!userBean.enableResetLogin}"/>
		<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;"
						 rendered="#{userBean.verifyPasswordMandatory}" visible="#{!userBean.enableResetLogin}"/>
		
		<ice:outputLabel value="Firstname:" style="margin-right: 48px;"/>
		<ice:inputText value="#{userBean.user.firstName}" style="#{userBean.firstNameStyle}"/>
		<ice:outputLabel value="" rendered="#{userBean.firstNameMandatory}"/>
		<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;" rendered="#{userBean.firstNameMandatory}"/>
		
		<ice:outputLabel value="Lastname:"/>
		<ice:inputText id="lastName" value="#{userBean.user.lastName}" style="#{userBean.lastNameStyle}"/>
		<ice:outputLabel value="" rendered="#{userBean.lastNameMandatory}"/>
		<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;" rendered="#{userBean.lastNameMandatory}"/>
		
		<ice:outputLabel value="Email:"/>          			
		<ice:inputText id="email" value="#{userBean.user.email}" style="#{userBean.emailStyle}"/>
		<ice:outputLabel value="" rendered="#{userBean.emailMandatory}"/>
		<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;" rendered="#{userBean.emailMandatory}"/>
		<ice:outputLabel value="" rendered="#{userBean.emailWrongFormat}"/>
		<ice:outputLabel value="Email not valid !" style="color: red; font-size: 10px;" rendered="#{userBean.emailWrongFormat}"/>
		<ice:outputLabel value="" rendered="#{userBean.emailError}"/>
		<ice:outputLabel value="This email is already used !" style="color: red; font-size: 10px;" rendered="#{userBean.emailError}"/>
		<ice:outputLabel value="" rendered="#{userBean.emailError}"/>
		<ice:outputLabel value="Please, choose another email." style="color: red; font-size: 10px;"
						 rendered="#{userBean.emailError}"/>
		
		<ice:outputLabel value="Phone:"/>
		<ice:inputText value="#{userBean.user.phone1}" style="width:280px;"/>
  			
  			<!-- 
  			<ice:outputLabel value="Access Level:" rendered="#{!userBean.roleModifyMode}"/>
  			<ice:panelGrid columns="2" rendered="#{!userBean.roleModifyMode}">
  				<ice:outputText value="#{userBean.userRoleItemsStr}"/>
  				<ice:commandButton 	actionListener="#{userBean.handleRole}"
 							   	image="/images/IndiKtor2.0/Buttons/editSmall.png"              
           	 					alt="Edit user role" />
  			</ice:panelGrid>
  			 -->
  			    			
	</ice:panelGrid>
       <ice:panelGroup id="update" rendered="#{userBean.user.id != 0}">
          	<ice:commandLink	actionListener="#{userBean.activateResetLogin}"             
           	 			value="Reset Login" />
          	<ice:panelGrid columns="2" rendered="#{userBean.enableResetLogin}">
          		<ice:outputLabel value="New Password:"/>
	   			<ice:inputSecret redisplay="true" id="pwd2" value="#{userBean.newPassword}" style="#{userBean.newPasswordStyle}"/>
				<ice:outputLabel value="" rendered="#{userBean.newPasswordMandatory}"/>
				<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;"
								 rendered="#{userBean.newPasswordMandatory}" disabled="#{userBean.user.id != 0}"/>
								 
				<ice:outputLabel value="" rendered="#{userBean.pwdNotMatch}"/>
				<ice:outputLabel value="Password doesn't match. Please retype new password" style="color: red; font-size: 10px;"
								 rendered="#{userBean.pwdNotMatch}" disabled="#{userBean.user.id != 0}"/>
						 
	   			<ice:outputLabel value="Confirm Password:"/>
	   			<ice:inputSecret redisplay="true" id="verifyPwd2" value="#{userBean.verifyPassword}" style="#{userBean.verifyPasswordStyle}"/>	
				<ice:outputLabel value="" rendered="#{userBean.verifyPasswordMandatory}"/>
				<ice:outputLabel value="Mandatory" style="color: red; font-size: 10px;"
								 rendered="#{userBean.verifyPasswordMandatory}" disabled="#{userBean.user.id != 0}"/>			
          	</ice:panelGrid>
       </ice:panelGroup>                                  
</ice:panelGrid>

<HR/><BR/>

<ice:panelGroup style="#{userBean.roleStyle}">
	<ice:outputLabel value="A user must have at least one role." style="color: red; font-size: 10px;" rendered="#{userBean.noRole}"/>
	<ice:panelGrid columns="2" style="text-align: center;">
		<ice:outputLabel value="Add role"/>
		<ice:outputLabel value="Role"/>
		<ice:dataTable id="userRoleSelectionLeft"
					   value="#{userBean.availableRoleItems}"
	   				   var="roleItem"
	  				   cellpadding="0"
	           		   scrollable="true"
	           		   scrollHeight="150px"
	           		   columnWidths="20, 200">
	        <ice:column style="text-align: center;">
	  			<f:facet name="header">
	   			</f:facet>
				<ice:commandButton style="float: center;" 
							   image="/images/IndiKtor2.0/Buttons/addSmall.png"
						   	   title="Add this role"														   	   
						   	   actionListener="#{userBean.addRoleItem}">
					<f:attribute name="roleItem" value="#{roleItem}"/>
				</ice:commandButton>
	  		</ice:column>
	        <ice:column>
	  			<f:facet name="header">
	       			<ice:outputText value="Role available"/>
	   			</f:facet>
	       		<ice:outputText value="#{roleItem.role.name}"/>
	  		</ice:column>
		</ice:dataTable>
		
		<ice:dataTable id="userRoleSelectionRight"
					   value="#{userBean.userRoleItems}"
	   				   var="roleItem"
	   				   cellpadding="0"
	           		   scrollable="true"
	           		   scrollHeight="150px"
	           		   columnWidths="200, 20">
			<ice:column>
				<f:facet name="header">
	                   <ice:outputText value="Role selected"/>
	               </f:facet>
	               	<ice:outputText value="#{roleItem.role.name}"/>
			</ice:column>
	        <ice:column style="text-align: center;">
	   			<f:facet name="header">
	   			</f:facet>
				<ice:commandButton style="float: center;" 
							   image="/images/IndiKtor2.0/Buttons/deleteSmall.png"
						   	   title="Delete this role"														   	   
						   	   actionListener="#{userBean.removeRoleItem}">
					<f:attribute name="roleItem" value="#{roleItem}"/>
				</ice:commandButton>
			</ice:column>
	  	</ice:dataTable>
	  	
	  	<!-- 
		<td valign="middle" align="center">
			<BR/>
			<ice:commandButton                 
		 		actionListener="#{userBean.addRoleItem}"
		 		image="/images/icon_set_arrows_add.jpg"
		 		alt="ADD" onfocus="this.blur();"/>
			<BR/>			
			<ice:commandButton                 
		 		actionListener="#{userBean.removeRoleItem}"
		 		image="/images/icon_set_arrows_remove.jpg"
		 		alt="REMOVE" onfocus="this.blur();"/>		
		</td>
		 -->
		 			
	</ice:panelGrid>
</ice:panelGroup>
</f:subview>  