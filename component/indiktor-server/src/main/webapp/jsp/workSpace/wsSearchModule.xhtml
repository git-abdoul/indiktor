<f:subview xmlns:h="http://java.sun.com/jsf/html"
 	    xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ice="http://www.icesoft.com/icefaces/component">
          
 <ice:panelGrid columns="1"> 
 		<ice:panelGrid columns="3">
 			<ice:commandLink value="Search" actionListener="#{workSpaceBean.metricSelectorBean.activateSearch}" style="#{workSpaceBean.metricSelectorBean.searchON?workSpaceBean.metricSelectorBean.searchONStyle:workSpaceBean.metricSelectorBean.searchOFFStyle}"/> | 
 			<ice:commandLink value="Quick Search" actionListener="#{workSpaceBean.metricSelectorBean.activateQuickSearch}" style="#{!workSpaceBean.metricSelectorBean.searchON?workSpaceBean.metricSelectorBean.searchONStyle:workSpaceBean.metricSelectorBean.searchOFFStyle}"/>
 		</ice:panelGrid>
 		<HR/>
 		<ice:inputText 	value="#{workSpaceBean.metricSelectorBean.searchQuery}"
						valueChangeListener="#{workSpaceBean.metricSelectorBean.searchMetricQuery}"
 					   	rendered="#{workSpaceBean.metricSelectorBean.searchON}"
 					   	style="width:200px; font-size: 10px"/>
 		<ice:panelGrid cellspacing="1" columns="1" rendered="#{!workSpaceBean.metricSelectorBean.searchON}"> 
	 		<ice:panelGrid cellspacing="1" columns="1" >
	 			<ice:panelGrid cellspacing="1" columns="4" border="0">
					<ice:outputLabel value="Environment :" style="font-size: 10px; font-weight: bold"/>					
					<ice:selectOneMenu value="#{workSpaceBean.metricSelectorBean.logicalEnvId}"
								 	   valueChangeListener="#{workSpaceBean.metricSelectorBean.onChangeLogicalEnv}"
									   partialSubmit="true" style="width:200px; font-size: 10px">
						<f:selectItems value="#{workSpaceBean.metricSelectorBean.logicalEnvItems}"/>
					</ice:selectOneMenu>
					<ice:outputLabel value="Context :" style="font-size: 10px; font-weight: bold"/>
					<ice:selectOneMenu value="#{workSpaceBean.metricSelectorBean.context}"
								 	   valueChangeListener="#{workSpaceBean.metricSelectorBean.onChangeContext}"
									   partialSubmit="true" style="width:200px; font-size: 10px">
						<f:selectItems value="#{workSpaceBean.metricSelectorBean.contextItems}"/>
					</ice:selectOneMenu>
					<ice:outputLabel value="Domain Type :" style="font-size: 10px; font-weight: bold"/>				
					<ice:selectOneMenu value="#{workSpaceBean.metricSelectorBean.domainTypeId}"
									   valueChangeListener="#{workSpaceBean.metricSelectorBean.onChangeDomainType}"
									   partialSubmit="true" style="width:200px; font-size: 10px">
						<f:selectItems value="#{workSpaceBean.metricSelectorBean.domainTypeItems}"/>
					</ice:selectOneMenu>	
					<ice:outputLabel value="Metric Domain :" style="font-size: 10px; font-weight: bold"/>
					<ice:selectOneMenu value="#{workSpaceBean.metricSelectorBean.metricDomainId}"
							    	   valueChangeListener="#{workSpaceBean.metricSelectorBean.onChangeMetricDomain}"
									   partialSubmit="true" style="width:200px; font-size: 10px">
						<f:selectItems value="#{workSpaceBean.metricSelectorBean.metricDomainItems}"/>
					</ice:selectOneMenu>
					<ice:outputLabel value="Metric Category :" style="font-size: 10px; font-weight: bold"/>
					<ice:selectOneMenu value="#{workSpaceBean.metricSelectorBean.metricCategoryId}"
							    	   valueChangeListener="#{workSpaceBean.metricSelectorBean.onChangeMetricCategory}"
									   partialSubmit="true" style="width:200px; font-size: 10px">
						<f:selectItems value="#{workSpaceBean.metricSelectorBean.metricCategoryItems}"/>
					</ice:selectOneMenu>
					<ice:outputLabel value="Domain View :" style="font-size: 10px; font-weight: bold"/>
					<ice:selectOneMenu value="#{workSpaceBean.metricSelectorBean.domainView}"
								 	   valueChangeListener="#{workSpaceBean.metricSelectorBean.onChangeDomainView}"
									   partialSubmit="true" style="width:200px; font-size: 10px">
						<f:selectItems value="#{workSpaceBean.metricSelectorBean.domainViewItems}"/>
					</ice:selectOneMenu>		
				</ice:panelGrid>										
			</ice:panelGrid>
			<ice:panelGrid cellspacing="1" columns="2">
				<ice:outputLabel value="Filter" style="font-size: 10px; font-weight: bold"/>
				<ice:inputText value="#{workSpaceBean.metricSelectorBean.filter}" valueChangeListener="#{workSpaceBean.metricSelectorBean.filterSelection}" partialSubmit="true" style="width: 200px;"/>
			</ice:panelGrid>
		</ice:panelGrid>	
		<HR/>
		<ice:panelGroup>
			<table>
				<tr>
					<td>
						<ice:panelGroup style="text-align:center;">
							<ice:dataPaginator for="MetricSelectorTable"
								rowsCountVar="rowsCount"
								displayedRowsCountVar="displayedRowsCountVar"
								firstRowIndexVar="firstRowIndex"
								lastRowIndexVar="lastRowIndex" pageCountVar="pageCount"
								pageIndexVar="pageIndex">
								<ice:outputFormat
									value="{0} Metric Instance found,  displaying {1} instances  from {2} to {3}. Page {4} / {5}."
									style="font-weight: bold;" styleClass="standard">
									<f:param value="#{rowsCount}" />
									<f:param value="#{displayedRowsCountVar}" />
									<f:param value="#{firstRowIndex}" />
									<f:param value="#{lastRowIndex}" />
									<f:param value="#{pageIndex}" />
									<f:param value="#{pageCount}" />
								</ice:outputFormat>
							</ice:dataPaginator>
						</ice:panelGroup>
					</td>
				</tr>
				<tr>
					<td height="250px">
						<ice:panelGroup scrollWidth="590px" scrollHeight="300px">
						<ice:dataTable id="MetricSelectorTable"
					   	   			   value="#{workSpaceBean.metricSelectorBean.selectionBeans}" 
									   var="filesRecord"	
									   sortColumn="#{workSpaceBean.metricSelectorBean.sortColumnName}"	
									   sortAscending="#{workSpaceBean.metricSelectorBean.ascending}"						   
									   columnWidths="30,100,175,125,120,255"
								       cellspacing="0" cellpadding="0" border="0"
								       rows="#{workSpaceBean.metricSelectorBean.rowsByPage}">
							<!-- 
							<ice:column style="text-align: center;">
								<f:facet name="header">
									<ice:selectBooleanCheckbox value="#{workSpaceBean.metricSelectorBean.selectAll}"
												       		   partialSubmit="true"		       	
												       		   valueChangeListener="#{workSpaceBean.metricSelectorBean.handleSelectAll}"/>
								</f:facet>
								<ice:selectBooleanCheckbox value="#{filesRecord.selected}"
										       			partialSubmit="true"		       	
										       			valueChangeListener="#{filesRecord.onChangeSelected}"/>
							</ice:column>
							 -->
							<ice:column style="text-align: center;">
								<f:facet name="header">
									<ice:commandButton image="/images/IndiKtor2.0/Buttons/addSmall.png"
												   	   title="Add selected metrics"														   	   
												   	   actionListener="#{workSpaceBean.metricSelectorBean.addAll}"/>
								</f:facet>
								<ice:commandButton image="/images/IndiKtor2.0/Buttons/addSmall.png"
											   	   title="Add this metric"														   	   
											   	   actionListener="#{workSpaceBean.metricSelectorBean.add}">
									<f:attribute name="filesRecord" value="#{filesRecord}"/>
								</ice:commandButton>
							</ice:column>
							<ice:column style="text-align: left;">
								<f:facet name="header">
									<ice:commandSortHeader columnName="#{workSpaceBean.metricSelectorBean.envColumnName}" arrow="true" >
						                <ice:outputText value="#{workSpaceBean.metricSelectorBean.envColumnName}"/>
						            </ice:commandSortHeader>
								</f:facet>	
								<ice:panelGroup style="font-size: 10px;">
									<ice:outputText value="#{filesRecord.metricGroupBean.logicalEnv.name}"/>
								</ice:panelGroup> 							
							</ice:column>	
							<ice:column style="text-align: left;">
								<f:facet name="header">
									<ice:commandSortHeader columnName="#{workSpaceBean.metricSelectorBean.categoryColumnName}" arrow="true" >
						                <ice:outputText value="#{workSpaceBean.metricSelectorBean.categoryColumnName}"/>
						            </ice:commandSortHeader>
								</f:facet>	
								<ice:panelGroup style="font-size: 10px;">
									<ice:outputText value="#{filesRecord.metricGroupBean.ikrCategory.label}"/>
								</ice:panelGroup> 							
							</ice:column>						  
							<ice:column style="text-align: left;">
								<f:facet name="header">
									<ice:commandSortHeader columnName="#{workSpaceBean.metricSelectorBean.instanceColumnName}" arrow="true" >
						                <ice:outputText value="#{workSpaceBean.metricSelectorBean.instanceColumnName}"/>
						            </ice:commandSortHeader>
								</f:facet>	
								<ice:panelGroup style=" font-size: 10px;">
									<ice:outputText value="#{filesRecord.metricGroupBean.fullIkrInstance}"/>
								</ice:panelGroup> 							
							</ice:column>		
							<ice:column style="text-align: left;">													
								<f:facet name="header">
									<ice:commandSortHeader columnName="#{workSpaceBean.metricSelectorBean.contextColumnName}" arrow="true" >
						                <ice:outputText value="#{workSpaceBean.metricSelectorBean.contextColumnName}"/>
						            </ice:commandSortHeader>
								</f:facet>	
								<ice:panelGroup style="font-size: 10px;">
									<ice:outputText value="#{filesRecord.metricGroupBean.context}"/>
								</ice:panelGroup> 							
							</ice:column>	
							<ice:column style="text-align: left;">													
								<f:facet name="header">
									<ice:commandSortHeader columnName="#{workSpaceBean.metricSelectorBean.domainColumnName}" arrow="true" >
						                <ice:outputText value="#{workSpaceBean.metricSelectorBean.domainColumnName}"/>
						            </ice:commandSortHeader>
								</f:facet>	
								<ice:panelGroup style="font-size: 10px;">
									<ice:outputText value="#{filesRecord.metricGroupBean.metricDomain.label}"/>
								</ice:panelGroup> 							
							</ice:column>
						</ice:dataTable>
						</ice:panelGroup>
					</td>
				</tr>
				<tr height="10px"><td></td></tr>
				<tr>
					<td>
						<ice:panelGroup style="float:center;"
										visible="#{workSpaceBean.metricSelectorBean.paginationVisible}">
							<center>
								<ice:dataPaginator for="MetricSelectorTable"
									fastStep="3" paginator="true" paginatorMaxPages="4">
									<f:facet name="first">
										<ice:graphicImage id="firstpage_1"
											url="#{styleBean.imageDirectory}arrow-first.gif"
											style="border:none;"
											title="#{msgs['page.dataScrolling.firstpage']}" />
									</f:facet>
									<f:facet name="last">
										<ice:graphicImage id="lastpage_1"
											url="#{styleBean.imageDirectory}arrow-last.gif"
											style="border:none;"
											title="#{msgs['page.dataScrolling.lastpage']}" />
									</f:facet>
									<f:facet name="previous">
										<ice:graphicImage id="previouspage_1"
											url="#{styleBean.imageDirectory}arrow-previous.gif"
											style="border:none;"
											title="#{msgs['page.dataScrolling.previouspage']}" />
									</f:facet>
									<f:facet name="next">
										<ice:graphicImage id="nextpage_1"
											url="#{styleBean.imageDirectory}arrow-next.gif"
											style="border:none;"
											title="#{msgs['page.dataScrolling.nextpage']}" />
									</f:facet>
									<f:facet name="fastforward">
										<ice:graphicImage id="fastforward_1"
											url="#{styleBean.imageDirectory}arrow-ff.gif"
											style="border:none;"
											title="#{msgs['page.dataScrolling.fastforward']}" />
									</f:facet>
									<f:facet name="fastrewind">
										<ice:graphicImage id="fastrewind_1"
											url="#{styleBean.imageDirectory}arrow-fr.gif"
											style="border:none;"
											title="#{msgs['page.dataScrolling.fastbackward']}" />
									</f:facet>
								</ice:dataPaginator>
							</center>
						</ice:panelGroup>
					</td>
				</tr>
			</table>
		</ice:panelGroup>
		<!-- 
		<HR/>		
		<ice:panelGrid border="0" columns="2">
			<ice:commandButton 
			 		actionListener="#{workSpaceBean.metricSelectorBean.add}"
			 		value="Add"/>
		 	<ice:commandButton                 
			 		actionListener="#{workSpaceBean.metricSelectorBean.addAll}"
			 		value="Add All"/>
		</ice:panelGrid>
		 -->
</ice:panelGrid>
</f:subview>