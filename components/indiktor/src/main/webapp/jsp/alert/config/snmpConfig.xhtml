<ui:composition template="/WEB-INF/template/mainTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
             	xmlns:ui="http://java.sun.com/jsf/facelets"
             	xmlns:f="http://java.sun.com/jsf/core"
             	xmlns:ice="http://www.icesoft.com/icefaces/component">

<ui:param name="pageTitle" value="Monitor Config Fields Extension" />
<ui:define name="content">

<ice:panelGrid>
<ice:panelGrid>
<ice:form>
	<table id="pageThirdPartySNMP">
		<tr>
			<td>
				<table id="topMenuBar">
					<tr>
						<td class="topMenuBarLeft2">		
							<div class="topMenuBarLeftAnalysis">
								<ice:commandButton image="/images/IndiKtor2.0/AdminPanel/ThirdParty/SNMPON.png"
								   				   title="SNMP Config"
								   				   value="SNMP Config"
								   				   actionListener="#{snmpConfigurationBean.init}"
												   action="#{snmpConfigurationBean.action}">
								</ice:commandButton>
							</div>		
							<!-- 
							<div class="topMenuBarLeftDomain">
								<ice:commandButton image="/images/IndiKtor2.0/AdminPanel/ThirdParty/SMTPOFF.png"
								   				   title="SMTP Config"
								   				   value="SMTP Config"
								   				   actionListener="#{smtpConfigurationBean.init}"
												   action="#{smtpConfigurationBean.action}">
								</ice:commandButton>
							</div>
							 -->
						</td>
						<td class="topMenuBarRight">
							<table>
								<tr>
									<td>
										<ice:commandButton styleClass="topMenuBarRightIcons" 
														   value="Add"
														   image="/images/IndiKtor2.0/Buttons/add.png"
													   	   title="Add new SNMP alert configuration"
													   	   actionListener="#{snmpConfigurationBean.addNewConfig}"/>
									</td>
									<!-- 
									<td>
										<ice:commandButton styleClass="topMenuBarRightIcons" 
														   value="Edit"
														   image="/images/IndiKtor2.0/Buttons/edit.png"
													   	   title="Edit selected SNMP alert configuration"
													   	   actionListener="#{snmpConfigurationBean.openNewSNMPAlertConfigPopup}"/>
									</td>
									 -->
									<td>
										<ice:commandButton panelConfirmation="#{snmpConfigurationBean.configsSelected == 0 ? false : 'deleteConfirmPanel'}"
														   styleClass="topMenuBarRightIcons" 
														   value="Remove"
														   image="/images/IndiKtor2.0/Buttons/delete.png"
													   	   title="Remove selected SNMP alert configuration"
													   	   actionListener="#{snmpConfigurationBean.deleteSelectedConfigs}"
													   	   rendered="#{snmpConfigurationBean.configsSelected != 0}"/>
										<ice:panelConfirmation 	id="deleteConfirmPanel" 
																message="#{snmpConfigurationBean.deleteMessage}"
									                   			acceptLabel="Delete" 
									                   			rendered="true"
									                   			autoCentre="true"/>
									</td>
									<td>
										<ice:commandButton styleClass="topMenuBarRightIcons" 
														   value="Return to administration panel"
														   image="/images/IndiKtor2.0/Buttons/cancel.png"
													   	   title="Return to administration panel"
													   	   actionListener="#{adminBean.init}"
													   	   action="#{adminBean.action}"/>
									</td>
									<td>
										<ice:commandButton styleClass="topMenuBarRightIcons"
														   image="/images/IndiKtor2.0/Buttons/help.png"
													   	   title="Help"/>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td>
				<table id="pageContent">
					<tr>
						<td class="contentFullPanelSNMP">
					   		<table>	
								<tr>
									<td>
							   			<ice:panelGroup style="text-align:center;" rendered="#{snmpConfigurationBean.listRendered}">
											<ice:dataPaginator id="SNMPTableScroll_1" for="SNMPTable"
												rowsCountVar="rowsCount"
												displayedRowsCountVar="displayedRowsCountVar"
												firstRowIndexVar="firstRowIndex"
												lastRowIndexVar="lastRowIndex" pageCountVar="pageCount"
												pageIndexVar="pageIndex">
												<ice:outputFormat
													value="{0} SNMP Config,  displaying {1} SNMP Config,  from {2} to {3}. Page {4} / {5}."
													style="font-weight: bold;" styleClass="standard">
													<f:param value="#{rowsCount}" />
													<f:param value="#{displayedRowsCountVar}" />
													<f:param value="#{firstRowIndex}" />
													<f:param value="#{lastRowIndex}" />
													<f:param value="#{pageIndex}" />
													<f:param value="#{pageCount}" />
												</ice:outputFormat>
											</ice:dataPaginator>
										</ice:panelGroup>
									</td>
								</tr>
								<tr height="10px"><td></td></tr>
								<tr>
									<td align="center">
										<ice:panelGrid columns="1" style="text-align: center;" width="1150px">
											<ice:outputLabel value="No SNMP has been configured. Click on the plus icon (+) to add SNMP."
															 rendered="#{!snmpConfigurationBean.listRendered}"/>
										</ice:panelGrid>
								    	<ice:panelGroup rendered="#{snmpConfigurationBean.listRendered}">
									    	<ice:dataTable 	id="SNMPTable"
									    					var="field"
								                      		value="#{snmpConfigurationBean.configs}"
								                      		columnClasses="tableCol"
								                      		columnWidths="20, 270, 45, 200, 85, 150, 85, 160, 40"
								                      		rows="#{snmpConfigurationBean.rowsByPage}">	
												<ice:column>													
													<f:facet name="header">
												       	<ice:selectBooleanCheckbox value="#{snmpConfigurationBean.selectAll}" 
												       							   valueChangeListener="#{snmpConfigurationBean.handleSelectAllConfigs}"	
												       							   partialSubmit="true"
												       							   style="text-align: center;"/>
													</f:facet>
											       	<ice:selectBooleanCheckbox value="#{field.selected}" 
											       							   valueChangeListener="#{snmpConfigurationBean.handleSelectedConfig}"	
											       							   partialSubmit="true"
											       							   style="text-align: center;">
											       		<f:attribute name="field" value="#{field}"/> 							   
											       	</ice:selectBooleanCheckbox>
												</ice:column>
								                <ice:column style="text-align: left;">
									                <!-- <ice:rowSelector
									                		value="#{field.selected}"
									                        selectionListener="#{snmpConfigurationBean.rowSelectionListener}"
									                        preStyleOnSelection="true"
									                        selectedClass="tableRowSelSelected"
															mouseOverClass="tableRowSelMouseOver"
															selectedMouseOverClass="tableRowSelSelectedMouseOver"
															enhancedMultiple="true"
											               	styleClass="iceRowSel-Dis"/> -->
									                <f:facet name="header">
									                    <ice:outputText value="Config Name"/>
									                </f:facet>
									                <ice:outputText value="#{field.config.name}"/>
									            </ice:column>		
									            <ice:column style="text-align: center;">
									                <f:facet name="header">
									                    <ice:outputText value="Version"/>
									                </f:facet>
									                <ice:outputText style="text-align: center;" value="#{field.config.version}"/>
									            </ice:column>	
									            <ice:column style="text-align: left;">		                
									            	<f:facet name="header">
									                    <ice:outputText value="Hostname"/>
									                </f:facet>
									                <ice:outputText value="#{field.config.hostname}"/>
									            </ice:column>
									             <ice:column style="text-align: center;">		                
									            	<f:facet name="header">
									                    <ice:outputText value="Port"/>
									                </f:facet>
									                 <ice:outputText style="text-align: center;" value="#{field.config.port}"/>		                
									            </ice:column>
									             <ice:column style="text-align: left;">		                
									            	<f:facet name="header">
									                    <ice:outputText value="Generic Type"/>
									                </f:facet>
									                 <ice:outputText value="#{field.genericTrapType}"/>		                
									            </ice:column>
									            <ice:column style="text-align: center;">		                
									            	<f:facet name="header">
									                    <ice:outputText value="Specific Type"/>
									                </f:facet>
									                 <ice:outputText style="text-align: center;" value="#{field.config.specificTrapType}"/>		                
									            </ice:column>
									            <ice:column style="text-align: center;">
									                <f:facet name="header">
									                    <ice:outputText value="Community"/>
									                </f:facet>
									                <ice:outputText value="#{field.config.community}"/>
									            </ice:column>		
												<ice:column>
													<f:facet name="header">
													</f:facet>	
													<ice:commandButton actionListener="#{snmpConfigurationBean.openNewSNMPAlertConfigPopup}"
																	   image="/images/IndiKtor2.0/Buttons/editSmall.png"
																	   title="Edit this SNMP alert configuration">
														<f:attribute name="field" value="#{field}"/>
													</ice:commandButton>
													<ice:commandButton panelConfirmation="deleteNoSelectionConfirmPanel"
																	   image="/images/IndiKtor2.0/Buttons/deleteSmall.png"
																	   actionListener="#{snmpConfigurationBean.deleteConfig}"
																	   title="Delete this SNMP alert configuration"
																   	   style="margin-left: 10px;">
														<f:attribute name="field" value="#{field}"/>	
													</ice:commandButton>
															
													<ice:panelConfirmation 	id="deleteNoSelectionConfirmPanel"
																			message="Are you sure to delete this SNMP alert configuration : #{field.config.name}"
																			type="normal"
																			acceptLabel="Delete"
																			rendered="true"
																			autoCentre="true"/>							
												</ice:column>						       
									        </ice:dataTable>
								    	</ice:panelGroup>
								    	<ice:panelGroup style="float:center;" visible="#{snmpConfigurationBean.paginationVisible}"
								    					rendered="#{snmpConfigurationBean.listRendered}">
											<center>
												<ice:dataPaginator id="SNMPTableScroll_2" for="SNMPTable"
													fastStep="3" paginator="true" paginatorMaxPages="4" actionListener="#{snmpConfigurationBean.pageChangeListener}">
													<f:facet name="first">
														<ice:graphicImage id="firstpage_1"
															url="#{styleBean.imageDirectory}arrow-first.gif"
															style="border:none;"
															title="#{msgs['page.dataScrolling.firstpage']}" />
													</f:facet>
													<f:facet name="last">
														<ice:graphicImage id="lastpage_1"
															url="#{styleBean.imageDirectory}arrow-last.gif"
															style="border:none;"
															title="#{msgs['page.dataScrolling.lastpage']}" />
													</f:facet>
													<f:facet name="previous">
														<ice:graphicImage id="previouspage_1"
															url="#{styleBean.imageDirectory}arrow-previous.gif"
															style="border:none;"
															title="#{msgs['page.dataScrolling.previouspage']}" />
													</f:facet>
													<f:facet name="next">
														<ice:graphicImage id="nextpage_1"
															url="#{styleBean.imageDirectory}arrow-next.gif"
															style="border:none;"
															title="#{msgs['page.dataScrolling.nextpage']}" />
													</f:facet>
													<f:facet name="fastforward">
														<ice:graphicImage id="fastforward_1"
															url="#{styleBean.imageDirectory}arrow-ff.gif"
															style="border:none;"
															title="#{msgs['page.dataScrolling.fastforward']}" />
													</f:facet>
													<f:facet name="fastrewind">
														<ice:graphicImage id="fastrewind_1"
															url="#{styleBean.imageDirectory}arrow-fr.gif"
															style="border:none;"
															title="#{msgs['page.dataScrolling.fastbackward']}" />
													</f:facet>
												</ice:dataPaginator>
											</center>
										</ice:panelGroup>
									</td>
								</tr>
							</table>  
					 		<!-- </ice:panelGrid> -->
						</td>
						<td></td>
					</tr>
				</table> 	
			</td>
		</tr>
	</table>
	
	<ice:panelPopup draggable="false" modal="true" autoCentre="true" rendered="#{snmpConfigurationBean.rendererNewSNMPAlertConfig}">
	    <f:facet name="header">
	    	<ice:panelGroup style="height: 25px;">
		       	<table width="100%">
		       		<tr>
		       			<td><ice:outputText style="float: left;" value="#{snmpConfigurationBean.rowConfig.config.id != 0 ? 'Update SNMP Alert Config' : 'New SNMP Alert Config'}"/></td>
		       			<td><ice:commandButton style="float: right;" 
		       								   actionListener="#{snmpConfigurationBean.closeNewSNMPAlertConfigPopup}"
		       								   image="/images/i/cal_off.gif"
		       								   alt="Close"/>
		       				<ice:commandButton style="float: right;"
		       								   actionListener="#{snmpConfigurationBean.saveConfig}" 
											   value="Add New Config"
											   title="Save" 
											   styleClass="iconPopup"
											   image="/images/IndiKtor2.0/Buttons/saveSmall.png"/>
						</td>
		       		</tr>
		       	</table> 
		    </ice:panelGroup>
	    </f:facet>
	    <f:facet name="body">
			<ice:panelGrid columns="2">
  				<ice:outputLabel value="Version:"/>
  				<ice:selectOneMenu 	value="#{snmpConfigurationBean.version}" 
                     				partialSubmit="true"
                     				valueChangeListener="#{snmpConfigurationBean.onChangedVersion}">
                 	<f:selectItems value="#{snmpConfigurationBean.versions}"/>
             	</ice:selectOneMenu>   
             	
             	<ice:outputLabel value="Config Name:"/>
      			<ice:inputText value="#{snmpConfigurationBean.name}" style="width:250px"/>
      			
      			<ice:outputLabel value="Community:"/>
      			<ice:inputText value="#{snmpConfigurationBean.community}" style="width:250px"/>
      			
      			<ice:outputLabel value="Hostname:"/>
      			<ice:inputText value="#{snmpConfigurationBean.hostname}" style="width:250px"/>
      			
      			<ice:outputLabel value="Port:"/>
      			<ice:inputText  value="#{snmpConfigurationBean.port}" style="#{snmpConfigurationBean.portStyle}" partialSubmit="false"/>
      			<ice:outputLabel value="" rendered="#{snmpConfigurationBean.portWrongFormat}"/>
      			<ice:outputLabel  value="Wrong format, port must be an integer." style="color: red; font-size: 10px;" rendered="#{snmpConfigurationBean.portWrongFormat}"/>
      			<!-- <ice:outputLabel value="" rendered="#{snmpConfigurationBean.portWrongFormat}"/>
      			<ice:outputLabel  value="Port : format not valid" style="color: red;" rendered="#{snmpConfigurationBean.portWrongFormat}"/>
      			<ice:inputText  id="port" value="#{snmpConfigurationBean.port}" style="width:250px" partialSubmit="true">
      				<f:validator validatorId="portValidator"/>
      			</ice:inputText>
      			<ice:outputLabel value=""/>
      			<ice:message id="portError" for="port"/> -->
      			
      			<ice:outputLabel value="Generic Type:"/>
      			<ice:selectOneMenu 	value="#{snmpConfigurationBean.genericTrapType}" 
                     				partialSubmit="false">
                 	<f:selectItems value="#{snmpConfigurationBean.genericTrapTypes}"/>
             	</ice:selectOneMenu>   
      			
      			<ice:outputLabel value="Specific Type:"/>
      			<ice:inputText value="#{snmpConfigurationBean.specificTrapType}" style="#{snmpConfigurationBean.specificTrapTypeStyle}" partialSubmit="false"/>
      			<ice:outputLabel value="" rendered="#{snmpConfigurationBean.specificTrapTypeWrongFormat}"/>
      			<ice:outputLabel  value="Wrong format, specific type must be an integer." style="color: red; font-size: 10px;" rendered="#{snmpConfigurationBean.specificTrapTypeWrongFormat}"/>
      			
      			<ice:outputLabel value="User:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:inputText rendered="#{snmpConfigurationBean.snmpV3}" value="#{snmpConfigurationBean.user}" style="width:250px"/>
      			
      			<ice:outputLabel value="Auth Protocol:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:selectOneMenu 	value="#{snmpConfigurationBean.authProtocol}" 
                     				partialSubmit="false"
                     				rendered="#{snmpConfigurationBean.snmpV3}">
                 	<f:selectItems value="#{snmpConfigurationBean.authProtocols}"/>
             	</ice:selectOneMenu>   
      			
      			<ice:outputLabel value="Auth Password:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:inputText rendered="#{snmpConfigurationBean.snmpV3}" value="#{snmpConfigurationBean.authPassword}" style="width:250px"/>
      			
      			<ice:outputLabel value="Priv Protocol:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:selectOneMenu 	value="#{snmpConfigurationBean.privProtocol}" 
                     				partialSubmit="false"
                     				rendered="#{snmpConfigurationBean.snmpV3}">
                 	<f:selectItems value="#{snmpConfigurationBean.privProtocols}"/>
             	</ice:selectOneMenu>   
      			
      			<ice:outputLabel value="Priv Password:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:inputText rendered="#{snmpConfigurationBean.snmpV3}" value="#{snmpConfigurationBean.privPassword}" style="width:250px"/>
      			
      			<ice:outputLabel value="Context Name:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:inputText rendered="#{snmpConfigurationBean.snmpV3}" value="#{snmpConfigurationBean.contextName}" style="width:250px"/>
      			
      			<ice:outputLabel value="Engine ID:" rendered="#{snmpConfigurationBean.snmpV3}"/>
      			<ice:inputText rendered="#{snmpConfigurationBean.snmpV3}" value="#{snmpConfigurationBean.engineID}" style="width:250px"/>
  			</ice:panelGrid>
	    </f:facet>
	</ice:panelPopup>
			
</ice:form>
<ui:include src="/jsp/util/errorMessage.xhtml"/>
</ice:panelGrid>
</ice:panelGrid>
</ui:define>
</ui:composition>